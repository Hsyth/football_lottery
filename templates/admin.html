<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>çƒæ˜¯FCå¹´ä¼šæŠ½å¥–</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body class="stadium-bg">
<div class="overlay">

    <h1>ğŸ†çƒæ˜¯FCå¹´ä¼šæŠ½å¥–</h1>

    <!-- ä¿¡æ¯é¢æ¿ -->
    <div class="info">
        ğŸ‘¥ å‰©ä½™æœªä¸­å¥–äººæ•°ï¼š<b>{{ remaining }}</b><br><br>

        ğŸ† ä¸€ç­‰å¥–ï¼š{{ prize_info["ä¸€ç­‰å¥–"].left }} / {{ prize_info["ä¸€ç­‰å¥–"].total }}
        &nbsp;&nbsp;
        ğŸ¥ˆ äºŒç­‰å¥–ï¼š{{ prize_info["äºŒç­‰å¥–"].left }} / {{ prize_info["äºŒç­‰å¥–"].total }}
        &nbsp;&nbsp;
        ğŸ¥‰ ä¸‰ç­‰å¥–ï¼š{{ prize_info["ä¸‰ç­‰å¥–"].left }} / {{ prize_info["ä¸‰ç­‰å¥–"].total }}
    </div>

    <!-- æŠ½å¥–è¡¨å• -->
    <form method="post" style="margin-top: 20px;">
        <select name="prize" required>
            <option value="ä¸€ç­‰å¥–">ä¸€ç­‰å¥– Â· Nike å•è‚©åŒ…</option>
            <option value="äºŒç­‰å¥–">äºŒç­‰å¥– Â· å¡å°”ç¾æ‰“åº•è¡«</option>
            <option value="ä¸‰ç­‰å¥–">ä¸‰ç­‰å¥– Â· å¡å°”ç¾ä¸¤ä»¶å¥—</option>
        </select>
        <button>ğŸ¯ å¼€å§‹æŠ½å¥–</button>
    </form>

    <!-- ===== æŠ½å¥–æ»šåŠ¨ + ç»“æœå±•ç¤º ===== -->
    {% if winner %}

    <!-- éšè—ï¼šç”¨äºæ»šåŠ¨çš„å€™é€‰äºº -->
    <div style="display:none;">
        {% for p in players %}
        <span class="player-item">{{ p[1] }} å· Â· {{ p[0] }}</span>
        {% endfor %}
    </div>

    <div class="winner-box">
        <div id="rolling">ğŸ° æŠ½å¥–ä¸­...</div>

        <div id="final-winner" style="display:none;">
            ğŸ‰ {{ winner[1] }} å· Â· {{ winner[0] }}
        </div>
    </div>

    <script>
        const names = document.querySelectorAll(".player-item");
        const rolling = document.getElementById("rolling");
        const finalWinner = document.getElementById("final-winner");

        let index = 0;

        const timer = setInterval(() => {
            if (names.length > 0) {
                rolling.innerText = names[index].innerText;
                index = (index + 1) % names.length;
            }
        }, 100);

        setTimeout(() => {
            clearInterval(timer);
            finalWinner.style.display = "block";
        }, 3000);
    </script>

    {% endif %}

    <!-- é‡ç½®æŠ½å¥–ï¼ˆæµ‹è¯•ç”¨ï¼‰ -->
    <form method="post" action="/reset"
          onsubmit="return confirm('ç¡®è®¤æ¸…ç©ºæ‰€æœ‰ä¸­å¥–ç»“æœï¼Ÿä»…ç”¨äºæµ‹è¯•ï¼');"
          style="margin-top: 30px;">
        <button class="reset">ğŸ”„ é‡ç½®æŠ½å¥–ï¼ˆæµ‹è¯•ç”¨ï¼‰</button>
    </form>

    <!-- å‚ä¸äººå‘˜åå• -->
    <details style="margin-top: 25px;">
        <summary>ğŸ“‹ æŸ¥çœ‹å½“å‰æœªä¸­å¥–å‚ä¸äººå‘˜åå•</summary>
        <ul style="list-style: none; padding: 0;">
            {% for p in players %}
            <li>{{ p[1] }} å· Â· {{ p[0] }}</li>
            {% endfor %}
        </ul>
    </details>

</div>
</body>
</html>